#!/bin/bash





# remove kill txt file
rm ../phsp/output/*.txt

number_of_simulation=$(ls -1 /home/gate/testLSGAM/GAMMORA/macroMaker/output/myFirstSimu/myFirstSimu_beam_0/phsp/output/ | wc -l)



#execute script for set number of particule



echo 'reading root phsp file...'



python3 read_root.py /home/gate/testLSGAM/GAMMORA/macroMaker/output/myFirstSimu/myFirstSimu_beam_0 50



echo 'writting in main.mac ...'



for i in `seq 0 $((number_of_simulation-1))`;



do

	

    a=$(sed -n $((i+1))'p'  p.dat)

    sed -i -e "s/NB_PRIM/$a/g" /home/gate/testLSGAM/GAMMORA/macroMaker/output/myFirstSimu/myFirstSimu_beam_0/clinic/mac/$i/main.mac



done



rm p.dat

for i in $( ls data/*mhd )
  do
  sed -i -r 's/1 0 0 0 1 0 0 0 1/1 0 0 0 -1 0 0 0 -1/g' $i
  done

echo 'done'
